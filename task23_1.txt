Задание 1

Создайте группу для роли модератора и опишите необходимые доступы:

 может отменять публикацию продукта,
 может менять описание любого продукта,
 может менять категорию любого продукта.

Группу создавайте в админке. Права доступа для продуктов опишите в модели продукта и назначьте группе через админку. Не забудьте сохранить группы фикстурой или создать команду для создания групп для отправки наставнику на проверку.

Примечание

Недостающее поле признака публикации необходимо добавить таким образом, чтобы можно было определять статус продукта. Можно использовать
BooleanField
 со значением
False
 по умолчанию или
CharField
 с указанием вариантов значений (
choises
). При этом по умолчанию должен быть вариант, который не предполагает публикации продукта.

Проверяйте права, которые назначены пользователю в контроллерах или шаблонах. Данные об авторизованном пользователе хранятся в объекте
request.user
. Получить права пользователя в контроллере можно с помощью метода
has_perm()
.

При необходимости проверки прав доступа в шаблонах для отображения, например, кнопок в зависимости от роли пользователя необходимо использовать
{{ perms }}
. Документацию по использованию можно найти здесь.


Задание 2
Реализуйте решение, которое проверит, что редактирование продукта доступно только его владельцу.

Внедрите в шаблоны проверку на владельца объекта и отображайте кнопки редактирования только пользователям, которые являются владельцами (если пользователь не наделен другими правами).

Комменты

Права добавлены через консоль python3 manage.py shell

In [14]: from django.contrib.contenttypes.models import ContentType
In [15]: content_type = ContentType.objects.get_for_model(User)
In [16]: permission = Permission.objects.create(codename="set_published_status", name="Can publish products",  content_type=content_type)

In [17]: permission = Permission.objects.create(codename="set_category", name="Can change categories",  content_type=content_type)

In [18]: permission = Permission.objects.create(codename="set_description", name="Can change discription", content_type=content_type)




