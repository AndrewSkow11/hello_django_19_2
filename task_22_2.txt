22.2 Аутентификация



 Задание 3
Все контроллеры, которые отвечают за работу с продуктами, закройте для анонимных пользователей, при этом создаваемые продукты должны автоматически привязываться к авторизованному пользователю.
Чтобы закрыть контроллеры от анонимных пользователей, добавьте в CBV-контроллеры дополнительное наследование от
LoginRequiredMixin
 (документация здесь).
Не забудьте добавить поле для продуктов, которое будет указывать на владельца. Оно должно быть ссылкой на модель пользователя.
Для автоматической привязки пользователя к продукту переопределите в контроллере создания продукта метод
fom_valid()
.
Текущий авторизованный пользователь доступен через
self.request.user
 — запишите его в только что созданный продукт и не забудьте сохранить объект в базу данных.
Дополнительное задание
Добавьте интерфейс редактирования профиля пользователя.
Дополнительное задание, помеченное звездочкой, желательно, но не обязательно выполнять